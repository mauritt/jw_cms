{% extends 'base.html' %}
{% block body %}
<div class="container">
    <div class="row">
        <div class="col-med-12">
            <h1>Video Detail</h1>
        </div>
    </div>

<form
    id = 'detailsForm'
    name='{{ video.key }}'
    method="POST"
    action=""
    target = submission.frame
    onsubmit="deactivateSave()"
    >
    {% csrf_token %}


    <div class="row" id="formHeader">
        <div class="col-md-3" id="titleField">
            <input
                    id="{{ video.title }}"
                    class= "editable"
                    type="text"
                    name="title"
                    value = "{{ video.title }}"
                    onfocusout="activateSave()"
                    >
            <i class="material-icons">mode_edit</i>
        </div>
        <div class="col-md-9">
            <button id="embedButton" type="button" onclick="document.getElementById('showEmbed').hidden=false;">Embed</button>
            <div id="saveButtons">
                <a href=".."><button type="button">Close</button></a>
                <button type="submit" id="saveDetails">Save</button>
            </div>
        </div>
    </div>
        <iframe name="submission.frame" hidden></iframe>



    <div class="row">
        <div id="videoEmbed" class="col-md-6 col-md-offset-1">
            <script src="{{ embed }}"></script>
        </div>

        <div id="videoSummary" class="col-md-6">
            <h2>Video Summary</h2>
            <div class="container">
                <div class="row">
                    <label class="col-md-3">Status:</label>
                    <p class="{{ video.status }}" id="videoStatus">{{ video.status }}</p>
                </div>
                <div class="row">
                    <label class="col-md-3">Type:</label>
                    <p>{{ video.media_type }}</p>
                </div>
                <div class="row">
                    <label class="col-md-3">Duration:</label>
                    <p>{{ video.duration_as_time }}</p>
                </div>
                <div class="row">
                    <label class="col-md-3">Media ID:</label>
                    <input
                        type="text"
                        onClick="this.select();"
                        value="{{ video.key }}"
                        readonly="readonly"
                        size="8";
                        >
                </div>
            </div>
        </div>
    </div>


<div class="row">
    <div class = "col-md-5">
        <textarea
            name="description"
            id = '{{ video.description }}'
            class= "editable"
            form="detailsForm"
            rows="5"
            cols="40"
            onfocusout="activateSave()"
            >{{ video.description }}</textarea>
    </div>


</div>

</form>
</div>


<div id="showEmbed" hidden>
    <div id="embedDetails" class="container">
        <div id="embedHeader" class="row">
        <h3 class="col-md-12">GENERATE EMBED CODE</h3>
        </div>
        <div id="embedCode" class="row">
            <pre>&lt;script
            src='{{ embed }}'&gt;
        &lt;/script&gt;</pre>
        </div>
        <button id="embedClose" onclick="document.getElementById('showEmbed').hidden=true;">Close</button>



    </div>
    <div id="embedScreen" onclick="document.getElementById('showEmbed').hidden=true;">
    </div>
</div>







{% endblock %}
